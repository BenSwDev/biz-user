# 1. הקדמה
המערכת בנויה באופן מודולרי כך שכל עמוד מופעל בהתאם לסוג המשתמש, הרשאותיו והפעולות שנבחרו. התהליך מתחיל בכניסה ל-index.php, שמשמש כנקודת הכניסה הראשית ומנהל את ניתוב העמודים בעזרת פרמטרים שמועברים ב-URL. הקובץ auth.php מטפל בבדיקת ההרשאות והמשתמשים המורשים, ומגדיר את סביבת העבודה של המשתמש הנוכחי.

לאחר מכן, על פי הגדרות ותנאים ייחודיים, המערכת טוענת תפריטים ראשיים ותפריטי משנה (menu.php ו-submenu.php), כמו גם תפריטים מותאמים למשתמשים מסוגים מסוימים (menu_member.php).

כדי לספק פונקציונליות גלובלית ולנהל פעולות נפוצות, נעשה שימוש בקובץ functions.php. השילוב של רכיבים אלו מבטיח חוויית משתמש זורמת ומדויקת, המותאמת לצרכים שונים כמו יומן תפוסה, דוחות, או תהליכי עבודה ייעודיים.

הקבצים שעליהם מבוססת ההקדמה:
index.php
auth.php
functions.php
partial/menu.php
partial/submenu.php
partial/menu_member.php

עמוד זה (`pages/cc.php`) מציג ממשק לבחירת ספק סליקה (הקמת ספק סליקה חדש בתנאים בלעדיים או חיבור למסוף סליקה קיים). בתוכו משולבת תצוגה של שתי אפשרויות, וכן מנגנון להצגת טופס בתוך חלון קופץ (Popup) לצורך הזנת פרטי התקשרות והעדפות (כגון האם להנפיק חשבוניות).

הקוד משתמש ב-JavaScript (jQuery) לפתיחת החלון הקופץ (`#ccpop`) ולהחלפת כותרת ותצוגה בהתאם לסוג המסלול שנבחר (`typecc` = 1 או 2). כמו כן, ניתן למלא שדות שונים (שם מלא, שם המתחם, טלפון, אימייל) ולסמן אם המשתמש מעוניין להנפיק חשבוניות דרך המערכת.

---

# 2. הקבצים שנבדקו
1. **pages/cc.php**
    - קובץ זה כולל שני חלקים עיקריים בעמוד:
        1. **בחירת המסלול** – שני כפתורים המפעילים טופס הרשמה:
            - "הקימו ספק בתנאים בלעדיים"
            - "יש לי כבר ספק סליקה ואני מעוניין לסלוק דרכו"
        2. **חלון קופץ (Popup)** – מופעל בעת לחיצה על אחד הכפתורים. בחלון הקופץ יש כותרת דינמית, המתחלפת לפי סוג המסלול, וכן טופס פרטים אישיים ופרטיים נוספים כמו שם מלא, שם המתחם, טלפון, אימייל וסימון האם להנפיק חשבוניות.
    - הקוד משתמש בפקודות jQuery לפתיחת החלון הקופץ, להגדרת ערך השדה הנסתר (`typecc`) ולהחלפת עיצוב הכותרת בהתאם למסלול שנבחר.
    - קיימים שדות שונים המושפעים ממשתנה `$siteData` (לא מוצג במלואו בקוד הנוכחי), אך אין פירוט על מקורו או על מנגנון העיבוד שלו.

---

# 3. הקבצים שלא נמצאו
**אין** בקבצים שנסרקו (ע"פ התוכן שסופק) התייחסות מפורשת לכך שקובץ מסוים היה אמור להיות קיים אך "לא נמצא". לא התקבלה רשימה של קבצים שאמורים להתקיים אך בפועל נעדרים.

---

# 4. הקבצים שלא נבדקו
אין בקוד התייחסות מפורשת בשמות קבצים אחרים (מלבד אלה שהוגדר במפורש להתעלם מהם, כגון `index.php`, `partial/menu.php`, וכו`). כמו כן, לא מופיע שם קובץ נוסף שיש אליו קריאה ישירה בקוד.  
לכן, אין רשימת קבצים "נדרשים" שלא נבדקו.

---

# 5. תרחישים כוללים בעמוד

## הוראות לניתוח קוד ובניית תרחישי שימוש (Use Flow Scenarios)

### מטרה
להפיק ניתוח מקצועי ומדויק של הקוד הקיים, תוך זיהוי תרחישי השימוש האפשריים והתנהגות הממשק (Front-End) לצד הבנת הלוגיקה (Back-End).

---

### 1. זיהוי כל תרחישי השימוש
לאחר סריקת הקובץ, זוהו שני תרחישים עיקריים בעמוד:

1. **הקמת ספק סליקה בתנאים בלעדיים**
2. **חיבור למסוף סליקה קיים**

שני התרחישים משתמשים באותו חלון קופץ (Popup) ובאותו טופס, אך עם התאמה טקסטואלית ועיצובית שונה.

---

### 2. מבנה הניתוח של כל תרחיש שימוש
בכל תרחיש נציג שני חלקים:
1. **תיאור משתמש הקצה (Front-End / User Perspective)**
2. **תיאור המימוש בקוד (Back-End / Developer Perspective)**

---

### 3. ניתוח משתמש הקצה (Front-End Perspective)

#### תרחיש 1: הקמת ספק סליקה בתנאים בלעדיים
**תיאור כללי**  
המשתמש מעוניין להצטרף לסליקה חדשה בתנאים בלעדיים. בעמוד מוצג אזור עם כותרת וכפתור המזמין ללחוץ ולהצטרף. לחיצה על הכפתור פותחת חלון קופץ למילוי פרטי ההתקשרות.

| **מספר צעד** | **פעולה מצד המשתמש**                             | **תוצאה מצופה**                                                                                                                 |
|--------------|-------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| 1            | המשתמש גולש לעמוד ומזהה את האפשרות "הקימו ספק..." | רואה כותרת "1. הקימו ספק בתנאים בלעדיים" וכפתור "לחצו להצטרפות".                                                                |
| 2            | לוחץ על "לחצו להצטרפות"                          | נפתח חלון קופץ (`div#ccpop`) ובתוכו כותרת מתאימה לתרחיש 1, טופס למילוי שם מלא, שם מתחם, טלפון, אימייל ואפשרות לסמן הנפקת חשבוניות. |
| 3            | ממלא את השדות בטופס                              | רואה שהשדות מתמלאים. אם `$siteData` קיים, ייתכן שחלק מהשדות כבר מלאים מראש (למשל שם משתמש, אימייל וכו').                     |
| 4            | לוחץ על כפתור "שלח"                              | התהליך שולח את פרטי הטופס. המשתמש מצפה להודעה או מעבר שלב, אך בקובץ הנוכחי אין פירוט על השלב הבא או ההודעה המתקבלת.              |

---

#### תרחיש 2: חיבור למסוף סליקה קיים
**תיאור כללי**  
המשתמש כבר מחזיק ספק סליקה ורוצה לחברו למערכת. הוא בוחר באפשרות "יש לי כבר ספק סליקה..." ולוחץ על כפתור "לחצו לחיבור המסוף". נפתח אותו חלון קופץ, אך הכותרת משתנה.

| **מספר צעד** | **פעולה מצד המשתמש**                                     | **תוצאה מצופה**                                                                                                                        |
|--------------|---------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| 1            | המשתמש גולש לעמוד ומזהה את האפשרות "יש לי כבר ספק סליקה" | רואה כותרת "2. יש לי כבר ספק סליקה..." וכפתור "לחצו לחיבור המסוף".                                                                      |
| 2            | לוחץ על "לחצו לחיבור המסוף"                              | נפתח חלון קופץ (`div#ccpop`) ובתוכו כותרת מתאימה לתרחיש 2 (מתווספת class `"cc2"`), יחד עם טופס למילוי שם מלא, שם מתחם, טלפון ואימייל. |
| 3            | ממלא את השדות בטופס                                    | רואה שהשדות מתמלאים. יכול לסמן אם ברצונו להנפיק חשבוניות דרך המערכת.                                                                    |
| 4            | לוחץ על כפתור "שלח"                                    | התהליך שולח את פרטי הטופס. גם כאן אין פירוט על ההמשך בעמוד הנוכחי.                                                                        |

---

### 4. ניתוח המימוש בקוד (Back-End Perspective)

#### תרחיש 1: הקמת ספק סליקה בתנאים בלעדיים

**תיאור כללי**  
בקוד, בלחיצה על הכפתור הרלוונטי, קורית קריאת jQuery שמציגה את ה-Popup, מכניסה ערך `1` ל-`typecc` ומבטלת את ה-Class `"cc2"` על האלמנט `#ccpop_title`. בכך מוצג הטקסט המתאים לתרחיש הראשון. המשתמש ממלא טופס (method="post") ושולח אותו.

| **מספר צעד** | **לוגיקה טכנית**                                                                                                 | **מיקום בקוד**                  | **מבנה ותוכן הקוד**                                                                                 |
|--------------|-------------------------------------------------------------------------------------------------------------------|---------------------------------|------------------------------------------------------------------------------------------------------|
| 1            | זיהוי לחיצה על כפתור הראשון - מפעיל jQuery לפתיחת `#ccpop`                                                        | `<div class="join"...>`         | `onclick="$('#ccpop').fadeIn('fast'); $('#typecc').val('1'); $('#ccpop_title').removeClass('cc2')"` |
| 2            | הגדרת `typecc=1` בטופס (שדה מוסתר)                                                                               | בתוך אותו onclick              | `$('#typecc').val('1')`                                                                              |
| 3            | הסרת `cc2` מ-`#ccpop_title` כדי להציג את הטקסט של תרחיש 1 בלבד                                                  | בתוך אותו onclick              | `$('#ccpop_title').removeClass('cc2')`                                                               |
| 4            | הטופס שולח נתונים (POST) כאשר לוחצים "שלח" (event onclick="sendContact('ccform')")                                | `<div class="submit"...>`       | `sendContact('ccform')` (לא מוצג כיצד ממומש בפועל)                                                   |

---

#### תרחיש 2: חיבור למסוף סליקה קיים

**תיאור כללי**  
בקוד, לחיצה על הכפתור השני מפעילה jQuery לפתיחת החלון הקופץ, מעדכנת את `typecc` לערך `2` ומוסיפה Class `"cc2"` ל-`#ccpop_title`. כך מוצג הטקסט המתאים לתרחיש השני. שאר הטופס דומה.

| **מספר צעד** | **לוגיקה טכנית**                                                                                          | **מיקום בקוד**                  | **מבנה ותוכן הקוד**                                                                                  |
|--------------|------------------------------------------------------------------------------------------------------------|---------------------------------|-------------------------------------------------------------------------------------------------------|
| 1            | זיהוי לחיצה על כפתור השני - מפעיל jQuery לפתיחת `#ccpop`                                                   | `<div class="join"...>`         | `onclick="$('#ccpop').fadeIn('fast'); $('#typecc').val('2'); $('#ccpop_title').addClass('cc2')"`    |
| 2            | הגדרת `typecc=2` בטופס                                                                                   | בתוך אותו onclick              | `$('#typecc').val('2')`                                                                               |
| 3            | הוספת class `cc2` ל-`#ccpop_title` כדי להציג את הטקסט המתאים לתרחיש 2                                    | בתוך אותו onclick              | `$('#ccpop_title').addClass('cc2')`                                                                   |
| 4            | הטופס שולח נתונים (POST) כאשר לוחצים "שלח" (event onclick="sendContact('ccform')")                         | `<div class="submit"...>`       | `sendContact('ccform')`                                                                               |

---

# 6. מסמך שימוש (מדריך למשתמש)
1. **בחירת מסלול סליקה**
    - בדף, תוכלו לבחור אחד משני המסלולים:
        - "1. הקימו ספק בתנאים בלעדיים"
        - "2. יש לי כבר ספק סליקה ואני מעוניין לסלוק דרכו"

2. **לחיצה על הכפתור הרלוונטי**
    - אם אתם מעוניינים להקים ספק חדש, לחצו על "לחצו להצטרפות" מתחת לאפשרות הראשונה.
    - אם כבר יש לכם ספק סליקה ואתם רוצים לחברו, לחצו על "לחצו לחיבור המסוף" מתחת לאפשרות השנייה.

3. **מילוי הטופס**
    - בחלון הקופץ שייפתח, מלאו את הפרטים שלכם: שם מלא, שם המתחם, טלפון ואימייל.
    - אם תרצו להנפיק חשבוניות דרך המערכת, סמנו את התיבה המתאימה.

4. **שליחה**
    - בסיום מילוי הפרטים, לחצו על כפתור "שלח".
    - המערכת תקלוט את הפרטים ותמשיך בתהליך בהתאם להגדרות האתר (אין פירוט נוסף בקובץ זה).

---

# 7. סיכום
קובץ `pages/cc.php` מרכז בעמוד אחד שתי אפשרויות שונות לשימוש בספק סליקה. הוא מציג ממשק משתמש פשוט: כותרת, כפתורים ותיבה קופצת למילוי פרטים. ההבדל העיקרי בין התרחישים הוא ערך שדה מוסתר וטקסט משתנה בכותרת.  
מבחינת קוד, התרחיש דומה - אותו טופס ואותם שדות, רק עם עיצוב ותצוגת טקסט שונות, בהתאם למסלול שנבחר.

