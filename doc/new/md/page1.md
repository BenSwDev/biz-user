# 1. הקדמה
המערכת בנויה באופן מודולרי כך שכל עמוד מופעל בהתאם לסוג המשתמש, הרשאותיו והפעולות שנבחרו. התהליך מתחיל בכניסה ל-index.php, שמשמש כנקודת הכניסה הראשית ומנהל את ניתוב העמודים בעזרת פרמטרים שמועברים ב-URL. הקובץ auth.php מטפל בבדיקת ההרשאות והמשתמשים המורשים, ומגדיר את סביבת העבודה של המשתמש הנוכחי.

לאחר מכן, על פי הגדרות ותנאים ייחודיים, המערכת טוענת תפריטים ראשיים ותפריטי משנה (menu.php ו-submenu.php), כמו גם תפריטים מותאמים למשתמשים מסוגים מסוימים (menu_member.php).

כדי לספק פונקציונליות גלובלית ולנהל פעולות נפוצות, נעשה שימוש בקובץ functions.php. השילוב של רכיבים אלו מבטיח חוויית משתמש זורמת ומדויקת, המותאמת לצרכים שונים כמו יומן תפוסה, דוחות, או תהליכי עבודה ייעודיים.

הקבצים שעליהם מבוססת ההקדמה:
index.php
auth.php
functions.php
partial/menu.php
partial/submenu.php
partial/menu_member.php

בדף הבית (home.php) ובקבצים הנלווים (ajax_print_extras.php, ajax_print_vouchers.php, print_schedule.php) קיימת לוגיקה להצגת מידע סטטיסטי, יצירת הזמנות חדשות, הצגת לו״ז (Calendar) והדפסות שונות (כגון הדפסת לו״ז יומי, הדפסת תוספות בתשלום והדפסת שוברים). הקוד כולל בדיקות על סוג המשתמש (למשל, אם הוא “ספא” או לא) ומשתמש במחלקות חיצוניות שונות (`OrderSpaMain`, `UserUtilsNew`, פעולות `udb::` וכד׳) לצורך שאילתות למסד נתונים והפקת מידע להצגה למשתמש.

הגישה לעמוד home.php מציגה למשתמש כפתורי פעולה (כגון יצירת הזמנה, שיריון מקום, מעבר ליומן תפוסה והדפסת לו״ז), וכן מציגה סטטיסטיקות במידה והמשתמש הוא מנהל/אדמין-ספא. משם ניתן להפעיל תרחישי הדפסה (כמו הדפסת תוספות והדפסת שוברים), ולבצע פעולות AJAX (ajax_print_extras.php, ajax_print_vouchers.php) שמחזירות חלונות קופצים. נוסף לכך קיים קובץ print_schedule.php המפיק דפי ״לו״ז״ שונים בהתאם לפרמטרים הנשלחים (למשל daily / weekly / monthly schedule).

---

# 2. הקבצים שנבדקו
להלן ארבעת הקבצים שהופיעו ברשימה ושנסרקו בפועל (כולם אכן קיימים ובעלי תוכן):

1. **pages/home.php**
   - מציג עמוד בית למערכת, שבו כפתורים ליצירת הזמנה/שיריון מקום/יומן תפוסה/הדפסת לו"ז יומי, וכן תצוגת סטטיסטיקות (מספר הזמנות בחודש/שבוע/שנה, ועוד).
   - במידה והמשתמש הוא ספא (is_spa), מוצגים כפתורי ״יצירת הזמנה״ ו/או פונקציות ייחודיות לספא, והמידע על הזמנות אחרונות, אירועים קרובים, תוספות בתשלום (extras) ועוד.
   - בחלקו התחתון יש הצגה של הזמנות קרובות (next) והזמנות אחרונות (last), יחד עם פונקציות JavaScript לטעינת תוצאות נוספות.

2. **ajax_print_extras.php**
   - קובץ המופעל ב-AJAX ומחזיר חלון קופץ (Pop-up) שמציג טבלה מפורטת של תוספות בתשלום (extras) באותו יום מסוים.
   - מאחזר מה-Databases (באמצעות `udb::`) רשימת הזמנות שיש בהן תוספים (extras), ומציג אותן בטבלה להדפסה.

3. **ajax_print_vouchers.php**
   - קובץ המופעל ב-AJAX לצורך הדפסת שוברים (Vouchers) עבור תוספות בתשלום שנדרש להפיק להן שובר.
   - מאחזר הזמנות בתאריכים הנדרשים, ומפיק בלוקים (מעין כרטיסים/שוברים) לכל תוסף הנדרש עם אפשרות להדפיס אותם אחד-אחד או במרוכז.

4. **print_schedule.php**
   - משמש להפקת דפי ״לו״ז״ בתצורות שונות. מקבל פרמטרים כגון `day` (תאריך), `siteID`, ו`rt` (סוג דוח).
   - בברירת מחדל (`rt=0` או ללא `rt`): מציג לו״ז טיפולים לפי מטפלים ושעות.
   - `rt=2`: מציג לו״ז לפי שעות כרונולוגיות (סדר שעה).
   - `rt=3`: מציג משמרות של מטפלים (שעות עבודה/הפסקות).
   - `rt=4` או `rt=5`: מציג טבלת משמרות ברמה שבועית/חודשית.

---

# 3. הקבצים שלא נמצאו
אין בקבצים המסופקים או בתיאור שום אינדיקציה לכך שקיים קובץ כלשהו שצוין במפורש כ"לא נמצא". לפיכך, רשימה זו **ריקה**.

---

# 4. הקבצים שלא נבדקו
במסגרת הקוד, מופיעות התייחסויות למחלקות/מודולים שאינם מופיעים ברשימה ולא צירפת את תוכנם, למשל:
- **OrderSpaMain**
- **UserUtilsNew**
- קריאות `udb::` (ככל הנראה מודול/מחלקת גישה למסד נתונים)

קבצים/מודולים אלו אינם מופיעים ברשימת הקבצים שסופקו, ולכן לא נבדקו בפועל.

*(הערה: לפי ההוראות, אין צורך להתייחס כ"לא נבדקו" לקבצים ספציפיים כמו auth.php, functions.php וכד׳, שכן התבקשת להתעלם מהם אם אינם קיימים.)*

---

# 5. תרחישים כוללים בעמוד

## הוראות לניתוח קוד ובניית תרחישי שימוש (Use Flow Scenarios)
הניתוח הבא מזהה מספר תרחישי שימוש מרכזיים, כפי שעולים מארבעת הקבצים שנבדקו.

### 5.1 זיהוי כל תרחישי השימוש
1. **תרחיש שימוש A – כניסה לעמוד הבית (home.php) והצגת כפתורי הפעולה**
2. **תרחיש שימוש B – הדפסת לו״ז יומי** (דרך כפתור `#today-luz` בעמוד הבית)
3. **תרחיש שימוש C – צפייה והדפסת תוספות בתשלום** (ajax_print_extras.php)
4. **תרחיש שימוש D – הפקת שוברים להדפסה** (ajax_print_vouchers.php)
5. **תרחיש שימוש E – צפייה/הדפסה של לו״ז מורחב** (print_schedule.php) במצבי תצוגה שונים (rt=0,2,3,4,5)

---

### 5.2 מבנה הניתוח של כל תרחיש שימוש
להלן המבנה שיוצג בכל תרחיש:
1. תיאור משתמש הקצה (Front-End / User Perspective)
2. תיאור המימוש בקוד (Back-End / Developer Perspective)

---

### 5.3 תרחיש שימוש A: כניסה לעמוד הבית (home.php) והצגת כפתורי הפעולה)

#### 1) תיאור משתמש הקצה (Front-End Perspective)
- **תיאור כללי:**  
  המשתמש נכנס לעמוד הבית של המערכת. אם הוא משתמש בעל הרשאות מתאימות (למשל, ספא-אדמין), הוא רואה כפתורים שונים ליצירת הזמנה, שיריון מקום, מעבר ליומן תפוסה, הדפסת לו״ז יומי ותצוגת סטטיסטיקות. אם אין לו הרשאות, חלק מהאפשרויות מוסתרות.

- **טבלת צעדי התרחיש מצד המשתמש:**

| מספר צעד | פעולה מצד המשתמש         | תוצאה מצופה                                                  |
|----------|--------------------------|--------------------------------------------------------------|
| 1        | פותח את `/pages/home.php` בדפדפן | רואה כותרות, כפתורים ו/או נתוני סטטיסטיקה (בהתאם להרשאות). |
| 2        | גולל מטה בעמוד          | רואה רשימת הזמנות אחרונות, אירועים קרובים וכו׳.             |
| 3        | מחליט על פעולה הבאה (למשל, הדפסה/יצירה/מעבר...) | לוחץ על הכפתור הרצוי להמשך פעולה ספציפית.                   |

#### 2) תיאור המימוש בקוד (Back-End Perspective)
- **תיאור כללי:**  
  הקובץ `pages/home.php` בודק את סוג המשתמש (is_spa וכו׳), טוען נתונים (לדוגמה, נתוני סטטיסטיקה, רשימת הזמנות), ומציג כפתורי פעולה מותאמים. ניגש למסד הנתונים באמצעות קריאות `udb::` ושומר במשתנים כמו `$sumY`, `$sumM`, `$sumW` וכדומה.

- **טבלת צעדי התרחיש מצד המתכנת:**

| מספר צעד | לוגיקה טכנית                                                                                                                                                        | מיקום בקוד          | מבנה ותוכן הקוד                                                                                                   |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|--------------------------------------------------------------------------------------------------------------------|
| 1        | בדיקת סוג המשתמש: `$_CURRENT_USER->is_spa()`, `$_CURRENT_USER->access(...)` וכו׳ כדי להחליט אילו כפתורים להציג                                                       | `home.php` (שורות רבות)  | הצגת כפתורים כגון: `<button class="create-order">...`, `<button class="tfusa">...`, `<button id="today-luz">...`. |
| 2        | שליפת נתונים סטטיסטיים מתוך DB (כמו `SELECT COUNT(*) ...`) לתוך מערכים `$sumY`, `$sumM`, `$sumW`                                                                    | `home.php`          | קריאות `udb::single_row(...)`, `udb::full_list(...)`.                                                             |
| 3        | הצגת הרשימות האחרונות (last/next) – שליפת הזמנות באמצעות `udb::full_list($que)` ומעבר עליהן לצורך בניית HTML                                                        | `home.php`          | פונקציות עזר כגון `orderComp($order)` וכו׳.                                                                        |
| 4        | שרותי JavaScript שונים (jQuery) למחיקת/הצגת אלמנטים, טעינה דינמית (למשל `$('#loadMoreTop').click(function(){...})`)                                                 | Inline ב-`home.php` | קוד JS שמטפל בטעינת פריטים נוספים או בפתיחת חלון קופץ (popup)                                                     |

---

### 5.4 תרחיש שימוש B: הדפסת לו״ז יומי (כפתור “הדפסת לו״ז יומי”)

#### 1) תיאור משתמש הקצה (Front-End Perspective)
- **תיאור כללי:**  
  בעמוד הבית, המשתמש לוחץ על כפתור “הדפסת לו״ז יומי” (`#today-luz`). נפתח חלון פופ-אפ שבו ניתן לבחור תאריך ואתר (במידה ויש כמה אתרים). כשלוחצים “הדפס”, נפתח iframe המציג את הקובץ `print_schedule.php` עם הפרמטרים המתאימים, והממשק מאפשר למשתמש להדפיס בפועל את לו״ז היום המבוקש.

- **טבלת צעדי התרחיש מצד המשתמש:**

| מספר צעד | פעולה מצד המשתמש                         | תוצאה מצופה                                                      |
|----------|------------------------------------------|------------------------------------------------------------------|
| 1        | לוחץ על הכפתור “הדפסת לו״ז יומי” בעמוד הבית | מופיע חלון קופץ (Pop-up) עם אפשרות לבחור תאריך/אתר               |
| 2        | בוחר תאריך רצוי/אתר (אם יש)              | ה־iframe נטען אוטומטית ל־`print_schedule.php?day=...&siteID=...` |
| 3        | לוחץ על כפתור “הדפס” בחלון               | מקבל חלון הדפסה סטנדרטי של הדפדפן; ניתן להדפיס או לשמור כ-PDF    |

#### 2) תיאור המימוש בקוד (Back-End Perspective)
- **תיאור כללי:**  
  ב־`home.php` מוגדר `<button id="today-luz">...`. עם קליק, JavaScript מציג אלמנט `.luz-pop` עם select/date. כאשר המשתמש משנה תאריך, הסקריפט מטעין את `print_schedule.php` בתוך iframe. כשלוחצים “הדפס”, מתבצעת קריאה לפונקציית ההדפסה של הדפדפן דרך `iframe.contentWindow.print()`.

- **טבלת צעדי התרחיש מצד המתכנת:**

| מספר צעד | לוגיקה טכנית                                                                                                                               | מיקום בקוד             | מבנה ותוכן הקוד                                                                                 |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------|------------------------|--------------------------------------------------------------------------------------------------|
| 1        | מאזינים ל־click על `#today-luz`: `$('#today-luz').on('click', ...)` מציגים אלמנט `.luz-pop` (display:block)                                | `home.php` (JS inline) | `$('.luz-pop').fadeIn('fast')...`                                                               |
| 2        | בעת שינוי תאריך `$('input[name="days"]').on('change', ...)`: טוענים ל־src של iframe את `print_schedule.php?day=...&siteID=...`             | `home.php` (JS inline) | `$('#luzshow').attr('src','print_schedule.php?luz=1&day=' + _val + '&siteID=' + _siteval)`       |
| 3        | לחיצה על `#printfr`: מפעיל `iframe.contentWindow.print()`                                                                                  | `home.php` (JS inline) | `var iframe = $('#luzshow')[0]; iframe.contentWindow.print();`                                  |
| 4        | בצד שרת (בקובץ `print_schedule.php`) מתבצע עיבוד הפרמטרים GET (day, siteID, וכו’) להצגת טבלת לו״ז בפורמט מתאים                            | `print_schedule.php`   | בדיקת `$_GET['rt']`, הרצת שאילתות `udb::full_list(...)`, הצגת HTML בהתאם ל-`rt` הנבחר (רגיל, שבועי וכו׳). |

---

### 5.5 תרחיש שימוש C: צפייה והדפסת תוספות בתשלום (ajax_print_extras.php)

#### 1) תיאור משתמש הקצה (Front-End Perspective)
- **תיאור כללי:**  
  אם המשתמש הוא ספא-אדמין, מוצג לו ריכוז של ״תוספות בתשלום״ (Extras) לימים הקרובים (קיימים בעמוד הבית בלוקים, לדוגמה “תוספות ליום X”). בעת לחיצה על כפתור “פירוט והדפסה”, נשלחת בקשת AJAX ל־`ajax_print_extras.php` עם התאריך המבוקש. נפתח חלון Pop-up שמכיל טבלת תוספות, וכפתור “הדפס”.

- **טבלת צעדי התרחיש מצד המשתמש:**

| מספר צעד | פעולה מצד המשתמש                          | תוצאה מצופה                                                                                       |
|----------|-------------------------------------------|---------------------------------------------------------------------------------------------------|
| 1        | לוחץ על “תוספות בתשלום” עבור תאריך מסוים  | נפתח חלון קופץ עם רשימת ההזמנות והפרטים על התוספות                                                 |
| 2        | בודק/סוקר את הטבלה בחלון הקופץ            | רואה זמני טיפול, שם לקוח, מס’ הזמנה, מקור הגעה ותוספות בתשלום (שם וכמות)                            |
| 3        | לוחץ על כפתור “הדפס” בחלון הקופץ          | מופיעה תצוגת ההדפסה הסטנדרטית (Print Preview) ומאפשרת להדפיס או לשמור כ־PDF                        |

#### 2) תיאור המימוש בקוד (Back-End Perspective)
- **תיאור כללי:**  
  ב־`home.php` יש אלמנט JS מסוג `$('.printExtras').click(...)` ששולח POST ל־`ajax_print_extras.php` (באמצעות `$.post`), ומחזיר קוד HTML של Pop-up. קוד ה-Pop-up מכיל טבלת תוספות ותוך כדי יש כפתור הדפסה (JavaScript `window.print()`).

- **טבלת צעדי התרחיש מצד המתכנת:**

| מספר צעד | לוגיקה טכנית                                                                                                                                              | מיקום בקוד               | מבנה ותוכן הקוד                                                                                                          |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|---------------------------------------------------------------------------------------------------------------------------|
| 1        | קריאת `$.post('ajax_print_extras.php',{date:_date}, function(res){...})` ע”י קליק על `printExtras`                                                      | `home.php` (JS inline)   | פונקציית callback מחזירה את ה־HTML של החלון הקופץ, שמתווסף לדף באמצעות `$("body").append(res._txt)`.                     |
| 2        | בצד שרת (`ajax_print_extras.php`): מקבל `$_POST['date']`, מריץ שאילתה במסד הנתונים ומאתר הזמנות המכילות `extras`                                        | `ajax_print_extras.php`  | שימוש ב־`udb::full_list(...)` ומפתוח ה־JSON של extras עבור כל הזמנה.                                                     |
| 3        | יוצר HTML לטבלה, מציג שעות טיפול, שם הלקוח, מס’ הזמנה, מקור הגעה, וכל תוספת (quantity + שם התוספת)                                                        | `ajax_print_extras.php`  | בסיום נוצר `<div class="luz-pop" id="extraspop"...>` עם כפתור  `<div class="printpop" onclick="window.print()">הדפס</div>` |
| 4        | המשתמש לוחץ “הדפס” -> `window.print()`, והדפדפן פותח חלון הדפסה.                                                                                          | `ajax_print_extras.php`  | -                                                                                                                         |

---

### 5.6 תרחיש שימוש D: הפקת שוברים להדפסה (ajax_print_vouchers.php)

#### 1) תיאור משתמש הקצה (Front-End Perspective)
- **תיאור כללי:**  
  עבור תוספים מסוימים המסומנים כ־voucher (למשל תוספים הדורשים הפקת “שובר”), יש כפתור “שוברים להדפסה”. בעת לחיצה, נטענת תצוגה המכילה כרטיסים (שוברים) בלוקים אחד־אחד, עם פרטי אורח, תאריך, כמות הפריט, ועוד. המשתמש יכול לבחור להדפיס כל אחד בנפרד או במרוכז.

- **טבלת צעדי התרחיש מצד המשתמש:**

| מספר צעד | פעולה מצד המשתמש                    | תוצאה מצופה                                                                     |
|----------|-------------------------------------|---------------------------------------------------------------------------------|
| 1        | לוחץ על “שוברים להדפסה” עבור תאריך | חלון קופץ נפתח, מציג שוברים/כרטיסים נפרדים (בדומה לתוויות) של התוספות המיועדות |
| 2        | רואה את רשימת השוברים              | יכול לגלול, לבדוק, ואף להחליט על כפתור “הדפס”                                   |
| 3        | בוחר להדפיס במרוכז                  | מקבל חלון הדפסה אחד עם כל השוברים זה אחר זה                                     |

#### 2) תיאור המימוש בקוד (Back-End Perspective)
- **תיאור כללי:**  
  פעולה דומה לתרחיש “תוספות בתשלום”, רק שמבצעים קריאת POST ל־`ajax_print_vouchers.php`. הקובץ שולף שוב את ההזמנות הרלוונטיות, אך הפעם מציג בלוקים של שוברים נפרדים. יש אפשרות להדפיס כל שובר ע”י JavaScript `window.print()`.

- **טבלת צעדי התרחיש מצד המתכנת:**

| מספר צעד | לוגיקה טכנית                                                                                                                                                | מיקום בקוד                  | מבנה ותוכן הקוד                                                                                             |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------------------------|
| 1        | `$('div.printVouchers').click(function(){ $.post('ajax_print_vouchers.php',{date:_date},function(res){ $("body").append(res._txt); }) })`                | `home.php` (JS inline)      | בעת קליק, בקשת AJAX ל־`ajax_print_vouchers.php` שולחת פרמטר `date`.                                          |
| 2        | בצד שרת: `ajax_print_vouchers.php` בודק הזמנות המכילות extras עם `voucherprint = 1`, ויוצר בלוקים `<page size="A4">...</page>` לכל שובר                     | `ajax_print_vouchers.php`   | משתמש גם בנתוני `sites`, מציג פרטים כגון שם האורח, תאריך, וכמות התוסף.                                       |
| 3        | בסיום, נוצר `<div class="luz-pop">...</div>` עם מקבץ ה־HTML של השוברים וכלי עזר להדפסה (כפתור “הדפס בנפרד” / “במרוכז”)                                      | `ajax_print_vouchers.php`   | יש שימוש בתג `<page size="A4">...</page>` ועיצוב @media print, כך שההדפסה מפיקה עמודים נפרדים.               |
| 4        | המשתמש לוחץ על כפתור "הדפס" -> `window.print()`                                                                                                             | `ajax_print_vouchers.php`   | הדפדפן מציג חלון הדפסה; כל הבלוקים מודפסים.                                                                   |

---

### 5.7 תרחיש שימוש E: צפייה/הדפסה של לו״ז מורחב (print_schedule.php)

#### 1) תיאור משתמש הקצה (Front-End Perspective)
- **תיאור כללי:**  
  המשתמש (לרוב אדמין) יכול להיכנס ל־`print_schedule.php` באופן ישיר או דרך כפתורי העמוד הבית, כשהפרמטרים ב־URL מגדירים את אופי הדוח. כך ניתן להציג לו״ז לשבוע, לו״ז לפי מטפל, לפי שעות, לפי חודש וכדומה. המשתמש רואה טבלת משמרות/טיפולים, ויכול להשתמש בפקודת הדפסה רגילה של הדפדפן.

- **טבלת צעדי התרחיש מצד המשתמש:**

| מספר צעד | פעולה מצד המשתמש                  | תוצאה מצופה                                                                              |
|----------|-----------------------------------|------------------------------------------------------------------------------------------|
| 1        | ניגש לקישור כגון `print_schedule.php?day=...&rt=2` | מופיע לו״ז מפורמט בסגנון “לפי שעה”, או “משמרות שבוע” וכו׳, בהתאם לערך `rt`.  |
| 2        | צופה בטבלאות (משמרות/טיפולים)     | רואה מידע תואם (למשל, שעות עבודה למטפלים, הזמנות וכד׳).                                  |
| 3        | מפעיל “הדפס” בדפדפן              | מקבל הדפסה מותאמת של הטבלה                                                              |

#### 2) תיאור המימוש בקוד (Back-End Perspective)
- **תיאור כללי:**  
  הקובץ `print_schedule.php` קורא את `$_GET['day']`, `$_GET['rt']`, `$_GET['siteID']`, מפיק שאילתות מול DB (באמצעות `udb::full_list(...)` וכו’), ולאחר מכן בונה HTML שונה לפי הערך של `rt`. אם `rt=3` מציג משמרות (שעות עבודה והפסקות), אם `rt=5` — תצוגה חודשית, וכן הלאה.

- **טבלת צעדי התרחיש מצד המתכנת:**

| מספר צעד | לוגיקה טכנית                                                                                                                                          | מיקום בקוד              | מבנה ותוכן הקוד                                                                       |
|----------|------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|----------------------------------------------------------------------------------------|
| 1        | קריאת פרמטרים `$_GET['day']`, `$_GET['rt']`, `$_GET['siteID']`                                                                                      | `print_schedule.php`    | בדיקות: אם `rt`==0 או חסר, מציג כברירת מחדל לו״ז לפי מטפל; אם `rt=2`, לפי שעות; 3=משמרות וכו׳. |
| 2        | הרצת שאילתות על `orders`, `therapists`, `spaShifts` וכד’, בהתאם לסוג הדוח                                                                            | `print_schedule.php`    | `udb::full_list($que)`, לולאה על התוצאות.                                              |
| 3        | בניית טבלאות `<table>` או `<div>` בלוקים המתאימים לפורמט הדוח                                                                                        | `print_schedule.php`    | HTML שונה בין תצוגת שבוע, תצוגת חודש, או לפי מטפלים/שעות.                             |
| 4        | סגנונות @media print ואלמנטים ייחודיים (למשל `<page size="A4">`) כדי להקל על שימוש בהדפסת הדפדפן                                                   | `print_schedule.php`    | הוספת CSS inline ופקודות JS, הדפסה באמצעות `window.print()` (אם iframe נטען).          |

---

# 6. מסמך שימוש (מדריך למשתמש)
להלן מדריך קצר למשתמש כיצד לפעול מול הדף/מערכת (בשפה ישירה וידידותית):

1. **כניסה לעמוד הבית:**
   - היכנסו לקישור המתאים למערכת שלכם (למשל `...?page=home`).
   - אם אתם מנהלי ספא, תראו בראש העמוד כפתורים כגון “יצירת הזמנה”, “יומן תפוסה”, “שיריון מקום” ו”הדפסת לו״ז יומי”.
   - מתחת לכפתורים תופיע תצוגת נתונים (כמות הזמנות השבוע/החודש/השנה, והזמנות לחתימה).

2. **יצירת הזמנה חדשה או שיריון מקום:**
   - לחצו על הכפתור “יצירת הזמנה” (או “שיריון מקום”) כדי לפתוח את טופס יצירת ההזמנה הרצוי.
   - מלאו את הפרטים הנדרשים ושמרו.

3. **יומן תפוסה:**
   - לחצו על “יומן תפוסה” כדי לצפות ביומן המותאם למערכת שלכם (למשל `?page=absolute_calendar` וכו’). זהו ניהול כללי של ההזמנות/הטיפולים בזמן אמת.

4. **הדפסת לו״ז יומי:**
   - לחצו על הכפתור “הדפסת לו״ז יומי”. ייפתח חלון קופץ (popup).
   - בחרו תאריך ואתר (אם יש יותר מאתר אחד), ואז לחצו על “הדפס” כדי להציג חלון הדפסה ולהפיק PDF או עותק נייר.

5. **תוספות בתשלום ושוברים (בספא):**
   - בחלק התחתון של עמוד הבית ייתכן ותראו חלוקה לימים הקרובים עם כפתורי “תוספות בתשלום” ו”שוברים להדפסה”.
   - לחצו על “פירוט והדפסה” תחת “תוספות בתשלום” עבור יום מסוים. תוצג לכם רשימה מפורטת של ההזמנות והתוספות.
   - לחצו על “שוברים להדפסה” במקרה שהתוספות דורשות הפקת שוברים לאותו יום. תקבלו כרטיסיות הדפסה מוכנות.

6. **הדפסת לו״ז מורחב:**
   - אם תרצו להדפיס לו״ז מפורט בצורה שבועית/חודשית, גשו ידנית לכתובת `print_schedule.php?day=...&rt=...` עם הפרמטרים המתאימים.
   - תוכלו לבחור `rt=3` למשמרות יומיות, `rt=4` למשמרות שבועיות או `rt=5` להצגה חודשית.

---

# 7. סיכום
במסמך זה הוצגו ארבעת הקבצים שנמצאו בפועל (home.php, ajax_print_extras.php, ajax_print_vouchers.php, print_schedule.php) ותוכנם, ללא קבצים נוספים שחסרים או שלא נמצאו. המערכת מאפשרת למשתמשי ספא או למנהלים לצפות בסטטיסטיקות, ליצור הזמנות, להדפיס לו״ז יומי/שבועי/חודשי, ולהפיק תוספות בתשלום ושוברים. כל אחד מהתרחישים תואר הן מנקודת המבט של המשתמש (Front-End) והן מנקודת המבט של המימוש בקוד (Back-End). כך ניתן להבין לעומק את הזרימה הלוגית והחווייתית, ולהשתמש במערכת באופן מיטבי.
